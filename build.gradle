buildscript {
    apply from: "${rootProject.projectDir}/buildSrc/repositories.gradle"
    repositories extRepositories
    apply from: "${rootProject.projectDir}/buildSrc/buildscript-dependencies.gradle"
    dependencies extDependencies
}

group 'com.hillel.evo'
version '1.0-SNAPSHOT'

configure(allprojects) { project ->

    apply plugin: 'java'
    apply plugin: 'application'
    apply plugin: 'org.springframework.boot'
    apply plugin: 'io.spring.dependency-management'
    apply from: "${rootProject.projectDir}/buildSrc/dependencies.gradle"
    apply from: "${rootProject.projectDir}/buildSrc/analyze.gradle"
    
    sourceCompatibility = 11

    repositories extRepositories

    test {
        useJUnitPlatform {
            excludeTags 'slow'
            includeEngines 'junit-jupiter'
        }
        testLogging {
            events 'PASSED', 'FAILED', 'SKIPPED'
        }
        failFast = false
    }

    application {
        mainClassName = 'com.hillel.evo.adviser.starter.AdviserStarter'
    }

    bootJar {
        manifest {
            attributes 'Start-Class': 'com.hillel.evo.adviser.starter.AdviserStarter'
        }
    }
    
    dependencies {
        implementation boot.starterWeb
        implementation boot.starterJpa
        testImplementation boot.starterTest
        implementation utils.lombok
        runtime db.h2
        
        annotationProcessor utils.lombok
    }
}

wrapper {
    version = '5.6.2'
}

project(":auto-aid-adviser-main") {}